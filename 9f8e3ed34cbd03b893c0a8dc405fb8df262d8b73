{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0fa55e7e_52cdbb71",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 16
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-07-05T13:36:33Z",
      "side": 1,
      "message": "So to make sure I understand what\u0027s happening now...\n\nOn boot, the new BootReceiver is reached, where it does this:\n\nSchedule a WorkManager job that does the following for each demoted system app:\n1. If it\u0027s installed already, do nothing.\n2. If it\u0027s present but \"uninstalled\" (as is the case for our situation, where we keep its data), install it (as a user app).\n\nWait (on the same thread that received BOOT_COMPLETED?) for the result of the WorkManager job. If it has succeeded, disable the BootReceiver component so it won\u0027t be called again.\n\nIs this accurate?",
      "revId": "9f8e3ed34cbd03b893c0a8dc405fb8df262d8b73",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "55b84aa5_250540db",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 16
      },
      "lineNbr": 0,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2023-07-05T15:09:50Z",
      "side": 1,
      "message": "Why is this resolved without reply?\n\nI\u0027d be also curious about how this works. Has this been tested? \n\nWhat is `operation.result.get()` doing? Is this doing a blocking wait on the result of the work in the onReceive() method of the broadcast receiver?",
      "parentUuid": "0fa55e7e_52cdbb71",
      "revId": "9f8e3ed34cbd03b893c0a8dc405fb8df262d8b73",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "83b62d7d_3f55d6b7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 16
      },
      "lineNbr": 0,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-07-05T15:53:35Z",
      "side": 1,
      "message": "@tommy yes\n\n@torsten yes to all",
      "parentUuid": "55b84aa5_250540db",
      "revId": "9f8e3ed34cbd03b893c0a8dc405fb8df262d8b73",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bb478784_3b0150e4",
        "filename": "installer/src/main/java/org/calyxos/lupin/installer/install/BootReceiver.kt",
        "patchSetId": 16
      },
      "lineNbr": 44,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-07-05T13:36:33Z",
      "side": 1,
      "message": "Nit/comment: `getPackageInfo` avoids returning `null`, at least in ApplicationPackageManager, so giving up in the exception above would be another way to handle this case, but it doesn\u0027t matter either way.",
      "revId": "9f8e3ed34cbd03b893c0a8dc405fb8df262d8b73",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "482d2f73_b5035d21",
        "filename": "installer/src/main/java/org/calyxos/lupin/installer/install/BootReceiver.kt",
        "patchSetId": 16
      },
      "lineNbr": 44,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2023-07-05T15:09:50Z",
      "side": 1,
      "message": "The style does look strange though. We should log the exception at least and it could assign `null` to `packageInfo` if needed:\n\n```\nval packageInfo \u003d try {\n   foo\n} cat(e: Bar) {\n   null\n}\n```",
      "parentUuid": "bb478784_3b0150e4",
      "revId": "9f8e3ed34cbd03b893c0a8dc405fb8df262d8b73",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "edfb272d_ee408101",
        "filename": "installer/src/main/java/org/calyxos/lupin/installer/install/BootReceiver.kt",
        "patchSetId": 16
      },
      "lineNbr": 44,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-07-05T17:49:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "482d2f73_b5035d21",
      "revId": "9f8e3ed34cbd03b893c0a8dc405fb8df262d8b73",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2eb7d18a_5df4e8b5",
        "filename": "installer/src/main/java/org/calyxos/lupin/installer/install/BootReceiver.kt",
        "patchSetId": 16
      },
      "lineNbr": 56,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-07-05T13:36:33Z",
      "side": 1,
      "message": "Nit/comment: Same as above.",
      "revId": "9f8e3ed34cbd03b893c0a8dc405fb8df262d8b73",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c46bad7_8cbfcf42",
        "filename": "installer/src/main/java/org/calyxos/lupin/installer/install/BootReceiver.kt",
        "patchSetId": 16
      },
      "lineNbr": 62,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2023-07-05T15:09:50Z",
      "side": 1,
      "message": "If one app in the list of apps to demote fails, will this cause us to skip all following apps?",
      "revId": "9f8e3ed34cbd03b893c0a8dc405fb8df262d8b73",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9032517f_a289edb9",
        "filename": "installer/src/main/java/org/calyxos/lupin/installer/install/BootReceiver.kt",
        "patchSetId": 16
      },
      "lineNbr": 62,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-07-05T15:59:27Z",
      "side": 1,
      "message": "Yes. On the following attempt it would continue from that point since the previous apps would now be considered installed / migration succeeded. Hopefully the failure was temporary. If it is something else that we\u0027d need to address with more code changes then we\u0027d have to evaluate the failure and how to address it",
      "parentUuid": "7c46bad7_8cbfcf42",
      "revId": "9f8e3ed34cbd03b893c0a8dc405fb8df262d8b73",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ]
}