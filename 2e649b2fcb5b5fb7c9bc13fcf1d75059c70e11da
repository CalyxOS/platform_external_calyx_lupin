{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b32dadb2_a95ba408",
        "filename": "installer/src/main/AndroidManifest.xml",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2024-07-08T13:32:40Z",
      "side": 1,
      "message": "TODO: Add to privapp-perms when updating apk.",
      "revId": "2e649b2fcb5b5fb7c9bc13fcf1d75059c70e11da",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d65c28b4_bc1eeaf5",
        "filename": "shared/src/main/java/org/calyxos/lupin/ApkInstaller.kt",
        "patchSetId": 3
      },
      "lineNbr": 201,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2024-07-08T14:45:21Z",
      "side": 1,
      "message": "This installer class is used for Lupin installer *and* updater, so we either need to think through the implications to add this code to the updater, or somehow ensure it is only called in an installer context, maybe even better a non-main user context.\n\nAlso, we really *need* code comments for this as the purpose really isn\u0027t obvious from reading the code. In 5 years we still need to be able to figure out what this is for.",
      "revId": "2e649b2fcb5b5fb7c9bc13fcf1d75059c70e11da",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "967e205b_3e879532",
        "filename": "shared/src/main/java/org/calyxos/lupin/ApkInstaller.kt",
        "patchSetId": 3
      },
      "lineNbr": 201,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2024-12-02T22:22:11Z",
      "side": 1,
      "message": "What would the implications be if it is present in both? On first thought nothing negative immediately comes to mind",
      "parentUuid": "d65c28b4_bc1eeaf5",
      "revId": "2e649b2fcb5b5fb7c9bc13fcf1d75059c70e11da",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "068ce223_6a6add2e",
        "filename": "shared/src/main/java/org/calyxos/lupin/ApkInstaller.kt",
        "patchSetId": 3
      },
      "lineNbr": 201,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2024-12-04T16:24:06Z",
      "side": 1,
      "message": "Updater is typically meant to update apps.\n\nIf an install fails due to a downgrade in that scenario, then we\u0027d want to handle that differently, than it does for this specific work profile / secondary user use-case.",
      "parentUuid": "967e205b_3e879532",
      "revId": "2e649b2fcb5b5fb7c9bc13fcf1d75059c70e11da",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "25d0d9ae_7a04d02e",
        "filename": "shared/src/main/java/org/calyxos/lupin/ApkInstaller.kt",
        "patchSetId": 3
      },
      "lineNbr": 201,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2024-12-06T22:58:34Z",
      "side": 1,
      "message": "How would we want to handle a downgrade scenario in the updater? I\u0027m guessing different result? The call to install existing package should result in a no-op. We could make the sending of a success result conditional on `installExistingPackage` working as expected",
      "parentUuid": "068ce223_6a6add2e",
      "revId": "2e649b2fcb5b5fb7c9bc13fcf1d75059c70e11da",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "53d5bce8_c02cc119",
        "filename": "shared/src/main/java/org/calyxos/lupin/ApkInstaller.kt",
        "patchSetId": 3
      },
      "lineNbr": 201,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2024-12-10T22:10:33Z",
      "side": 1,
      "message": "@t@grobox.de thoughts?",
      "parentUuid": "25d0d9ae_7a04d02e",
      "revId": "2e649b2fcb5b5fb7c9bc13fcf1d75059c70e11da",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "10b6168c_1e367d8b",
        "filename": "shared/src/main/java/org/calyxos/lupin/ApkInstaller.kt",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2024-07-08T13:03:14Z",
      "side": 1,
      "message": "Ideally we check the result of this callback to determine if the operation was truly successful before returning anything. But this doesn\u0027t combine well with the synchronous return of the result",
      "range": {
        "startLine": 204,
        "startChar": 55,
        "endLine": 204,
        "endChar": 59
      },
      "revId": "2e649b2fcb5b5fb7c9bc13fcf1d75059c70e11da",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1febb84a_79e5cc96",
        "filename": "shared/src/main/java/org/calyxos/lupin/ApkInstaller.kt",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2024-07-08T14:07:48Z",
      "side": 1,
      "message": "I don\u0027t it. What is the use-case here? The commit message doesn\u0027t really make it clear. Is this meant for Lupin updater or installer? We want to install a newer version of an existing package, right? Then we do this if a downgrade fails? If the package is newer, why would it be a downgrade?",
      "parentUuid": "10b6168c_1e367d8b",
      "range": {
        "startLine": 204,
        "startChar": 55,
        "endLine": 204,
        "endChar": 59
      },
      "revId": "2e649b2fcb5b5fb7c9bc13fcf1d75059c70e11da",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "126f7510_d0dda818",
        "filename": "shared/src/main/java/org/calyxos/lupin/ApkInstaller.kt",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2024-07-08T14:13:10Z",
      "side": 1,
      "message": "See issue linked in commit message, Work profiles and secondary user.\n\nThis is for installer.",
      "parentUuid": "1febb84a_79e5cc96",
      "range": {
        "startLine": 204,
        "startChar": 55,
        "endLine": 204,
        "endChar": 59
      },
      "revId": "2e649b2fcb5b5fb7c9bc13fcf1d75059c70e11da",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "522b1969_3859bb78",
        "filename": "shared/src/main/java/org/calyxos/lupin/ApkInstaller.kt",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2024-07-08T14:45:21Z",
      "side": 1,
      "message": "ok thanks. This ticket talks about signature checking. How do we ensure the package installed in another user really is the one we want to add here? This broadcast receiver may not be the best place to start with that.",
      "parentUuid": "126f7510_d0dda818",
      "range": {
        "startLine": 204,
        "startChar": 55,
        "endLine": 204,
        "endChar": 59
      },
      "revId": "2e649b2fcb5b5fb7c9bc13fcf1d75059c70e11da",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "946c9000_2bd64847",
        "filename": "shared/src/main/java/org/calyxos/lupin/ApkInstaller.kt",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2024-07-08T14:58:22Z",
      "side": 1,
      "message": "Good point, in theory it is possible that the user has a different app with the same package name.\n\nWould it be an issue in practice though? The user already has the app installed.",
      "parentUuid": "522b1969_3859bb78",
      "range": {
        "startLine": 204,
        "startChar": 55,
        "endLine": 204,
        "endChar": 59
      },
      "revId": "2e649b2fcb5b5fb7c9bc13fcf1d75059c70e11da",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "81741a7d_5e5d8b49",
        "filename": "shared/src/main/java/org/calyxos/lupin/ApkInstaller.kt",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2024-12-02T22:22:11Z",
      "side": 1,
      "message": "Right, if the user already has a package that goes by the same package name but has a different signature, the error code should reflect that rather than version downgrade. I don\u0027t see how that would be an issue in this case.\nPersonally, I think it makes sense to let Lupin try to install as normal and we react based on the result or error, meaning this would be the place for our handling.",
      "parentUuid": "946c9000_2bd64847",
      "range": {
        "startLine": 204,
        "startChar": 55,
        "endLine": 204,
        "endChar": 59
      },
      "revId": "2e649b2fcb5b5fb7c9bc13fcf1d75059c70e11da",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "68dbf90b_b02657de",
        "filename": "shared/src/main/java/org/calyxos/lupin/ApkInstaller.kt",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2024-12-04T16:24:06Z",
      "side": 1,
      "message": "\u003e  the error code should reflect that rather than version downgrade. \n\nHave you / Can you verify that?",
      "parentUuid": "81741a7d_5e5d8b49",
      "range": {
        "startLine": 204,
        "startChar": 55,
        "endLine": 204,
        "endChar": 59
      },
      "revId": "2e649b2fcb5b5fb7c9bc13fcf1d75059c70e11da",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "36ac2edc_01ff1d80",
        "filename": "shared/src/main/java/org/calyxos/lupin/ApkInstaller.kt",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2024-12-06T22:58:34Z",
      "side": 1,
      "message": "Looks like it\u0027s not the case. Error for version downgrade is thrown before checking signature mismatch",
      "parentUuid": "68dbf90b_b02657de",
      "range": {
        "startLine": 204,
        "startChar": 55,
        "endLine": 204,
        "endChar": 59
      },
      "revId": "2e649b2fcb5b5fb7c9bc13fcf1d75059c70e11da",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ]
}